import{d as B,r as g,S as C,o as _,b as D,w as o,u as l,I as N,e as a,f as R,L as U,M as S,g as T,h as u,i as O,j as p,q as x,T as P,s as L,G as r,N as f,O as M,P as I,Q as j,R as y,x as q,U as A,C as G,D as H,V as Q,E as d}from"./index-BOqNN7pk.js";import{e as m,d as c,g as z,u as F,f as J}from"./firebase-nSD_PLfQ.js";const K={key:0,class:"ion-text-center ion-padding"},W={key:1},X={key:2,class:"ion-text-center ion-padding"},h=B({__name:"EditExpensePage",setup(Y){const v=H(),V=C(),t=g(null),b=g(!0),i=V.params.id;_(async()=>{try{const n=m(c,"expenses",i),e=await z(n);e.exists()?t.value=e.data():console.log("No such document!")}catch(n){console.error("Error fetching expense:",n),alert("เกิดข้อผิดพลาดในการโหลดข้อมูล")}finally{b.value=!1}});const k=async()=>{if(t.value)try{const n=m(c,"expenses",i);await F(n,{title:t.value.title,amount:Number(t.value.amount),type:t.value.type,category:t.value.category,note:t.value.note,updatedAt:new Date}),v.push("/tabs/tab1")}catch(n){console.error("Error updating expense:",n),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},w=async()=>{await(await Q.create({header:"ยืนยันการลบ",message:"คุณแน่ใจหรือไม่ว่าต้องการลบรายการนี้?",buttons:[{text:"ยกเลิก",role:"cancel"},{text:"ลบ",role:"confirm",handler:()=>{E()}}]})).present()},E=async()=>{try{const n=m(c,"expenses",i);await J(n),v.push("/tabs/tab1")}catch(n){console.error("Error deleting expense:",n),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}};return(n,e)=>(d(),D(l(N),null,{default:o(()=>[a(l(O),null,{default:o(()=>[a(l(R),null,{default:o(()=>[a(l(U),{slot:"start"},{default:o(()=>[a(l(S),{"default-href":"/tabs/tab1"})]),_:1}),a(l(T),null,{default:o(()=>[...e[5]||(e[5]=[u("แก้ไขรายการ",-1)])]),_:1})]),_:1})]),_:1}),a(l(G),{class:"ion-padding"},{default:o(()=>[b.value?(d(),p("div",K,[a(l(P)),e[6]||(e[6]=x("p",null,"กำลังโหลดข้อมูล...",-1))])):t.value?(d(),p("div",W,[a(l(L),null,{default:o(()=>[a(l(r),null,{default:o(()=>[a(l(f),{label:"ชื่อรายการ","label-placement":"floating",modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.title=s),placeholder:"เช่น ซื้อของ, เงินเดือน"},null,8,["modelValue"])]),_:1}),a(l(r),null,{default:o(()=>[a(l(f),{label:"จำนวนเงิน","label-placement":"floating",type:"number",modelValue:t.value.amount,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.amount=s),placeholder:"0.00"},null,8,["modelValue"])]),_:1}),a(l(r),null,{default:o(()=>[a(l(M),{label:"ประเภท","label-placement":"floating",modelValue:t.value.type,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.type=s)},{default:o(()=>[a(l(I),{value:"income"},{default:o(()=>[...e[7]||(e[7]=[u("รายรับ",-1)])]),_:1}),a(l(I),{value:"expense"},{default:o(()=>[...e[8]||(e[8]=[u("รายจ่าย",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l(r),null,{default:o(()=>[a(l(f),{label:"หมวดหมู่","label-placement":"floating",modelValue:t.value.category,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.category=s),placeholder:"เช่น อาหาร, เงินเดือน, ช้อปปิ้ง"},null,8,["modelValue"])]),_:1}),a(l(r),null,{default:o(()=>[a(l(j),{label:"หมายเหตุ","label-placement":"floating",modelValue:t.value.note,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.note=s),rows:3,placeholder:"บันทึกเพิ่มเติม..."},null,8,["modelValue"])]),_:1})]),_:1}),a(l(y),{expand:"block",onClick:k,disabled:!t.value.title||!t.value.amount,class:"ion-margin-top"},{default:o(()=>[...e[9]||(e[9]=[u(" บันทึกการแก้ไข ",-1)])]),_:1},8,["disabled"]),a(l(y),{expand:"block",color:"danger",fill:"outline",onClick:w,class:"ion-margin-top"},{default:o(()=>[a(l(q),{slot:"start",icon:l(A)},null,8,["icon"]),e[10]||(e[10]=u(" ลบรายการนี้ ",-1))]),_:1})])):(d(),p("div",X,[...e[11]||(e[11]=[x("p",null,"ไม่พบข้อมูล",-1)])]))]),_:1})]),_:1}))}});export{h as default};
